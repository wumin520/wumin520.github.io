(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[46],{"02GU":function(e,a,t){e.exports={calendarCdk:"antd-pro-pages-v1-fang-dan-step-form-style-calendarCdk",uploadCustom:"antd-pro-pages-v1-fang-dan-step-form-style-uploadCustom",stepForm:"antd-pro-pages-v1-fang-dan-step-form-style-stepForm",stepFormText:"antd-pro-pages-v1-fang-dan-step-form-style-stepFormText",result:"antd-pro-pages-v1-fang-dan-step-form-style-result",desc:"antd-pro-pages-v1-fang-dan-step-form-style-desc",information:"antd-pro-pages-v1-fang-dan-step-form-style-information",label:"antd-pro-pages-v1-fang-dan-step-form-style-label",money:"antd-pro-pages-v1-fang-dan-step-form-style-money",uppercase:"antd-pro-pages-v1-fang-dan-step-form-style-uppercase"}},C5Q5:function(e,a,t){"use strict";t.r(a);t("+L6B");var n,r,o,l,i=t("2/Rp"),s=t("jehZ"),d=t.n(s),c=(t("5NDa"),t("5rEg")),u=t("2Taf"),m=t.n(u),p=t("vZ4D"),f=t.n(p),y=t("l4Ni"),g=t.n(y),h=t("ujKo"),v=t.n(h),E=t("MhPg"),q=t.n(E),k=(t("y8nQ"),t("Vl3Y")),I=t("q1tI"),b=t.n(I),T=t("MuoO"),w=t("02GU"),_=t.n(w),x={labelCol:{span:6},wrapperCol:{span:18}},C=(n=Object(T["connect"])(function(e){var a=e.form,t=e.loading,n=e.user;return{currentUser:n.currentUser,data:a.step,pddGoodUrl:a.pddGoodUrl,pddZSId:a.pddZSId,submitting:t.effects["form/queryGoodsDetail"]}}),r=k["a"].create(),n(o=r((l=function(e){function a(){var e,t;m()(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=g()(this,(e=v()(a)).call.apply(e,[this].concat(r))),t.fetchPddGoodsDetail=function(e){var a=t.props,n=a.dispatch,r=a.location,o=e;void 0!==r.query.qf&&(o.qf=r.query.qf,"1"===r.query.qf&&(o.type=1)),console.log("values -> 1",o),n({type:"form/queryGoodsDetail",payload:o})},t.componentDidMount=function(){},t}return q()(a,e),f()(a,[{key:"render",value:function(){var e=this,a=this.props,t=a.form,n=a.pddGoodUrl,r=a.submitting,o=a.dispatch,l=a.pddZSId,s=a.currentUser,u=a.location,m=t.getFieldDecorator,p=t.validateFields,f=function(){p(function(a,t){a||(e.fetchPddGoodsDetail(t),o({type:"form/updateState",payload:{category_id:"",taskId:"",schedules:[],startTime:"",endTime:""}}))})};return b.a.createElement(I["Fragment"],null,b.a.createElement(k["a"],{layout:"horizontal",style:{marginTop:"140px"},className:_.a.stepForm,hideRequiredMark:!0},"1"!==u.query.qf?b.a.createElement(k["a"].Item,d()({},x,{label:"\u62fc\u591a\u591a\u5546\u54c1\u94fe\u63a5"}),m("goods_id",{initialValue:n,rules:[{required:!0,message:"\u8bf7\u7c98\u8d34\u5546\u54c1\u94fe\u63a5\u8fdb\u884c\u6821\u9a8c"}]})(b.a.createElement(c["a"],{placeholder:"\u8bf7\u7c98\u8d34\u5546\u54c1\u94fe\u63a5\u8fdb\u884c\u6821\u9a8c"}))):b.a.createElement(k["a"].Item,d()({},x,{label:"\u62fc\u591a\u591a\u5e97\u94fa\u7f16\u53f7\uff1a"}),m("goods_id",{initialValue:n,rules:[{required:!0,message:"\u8bf7\u7c98\u8d34\u62fc\u591a\u591a\u5e97\u94fa\u7f16\u53f7"}]})(b.a.createElement(c["a"],{placeholder:"\u8bf7\u7c98\u8d34\u62fc\u591a\u591a\u5e97\u94fa\u7f16\u53f7"}))),1===s.sh_type?b.a.createElement(k["a"].Item,d()({},x,{label:"\u62db\u5546\u56e2\u957fid"}),m("zs_duo_id",{initialValue:l})(b.a.createElement(c["a"],{placeholder:"\u9009\u586b"}))):"",b.a.createElement(k["a"].Item,{wrapperCol:{xs:{span:24,offset:0},sm:{span:x.wrapperCol.span,offset:x.labelCol.span}},label:""},b.a.createElement(i["a"],{loading:r,type:"primary",size:"large",onClick:f},"\u5f00\u59cb\u6821\u9a8c"))))}}]),a}(b.a.PureComponent),o=l))||o)||o);a["default"]=C},EmdU:function(e,a,t){"use strict";t.r(a);t("/zsF");var n,r,o,l,i=t("PArb"),s=(t("fOrg"),t("+KLJ")),d=(t("Mwp2"),t("VXEj")),c=(t("DZo9"),t("8z0m")),u=(t("+L6B"),t("2/Rp")),m=(t("Pwec"),t("CtXQ")),p=(t("5NDa"),t("5rEg")),f=t("jehZ"),y=t.n(f),g=(t("miYZ"),t("tsqr")),h=(t("OaEy"),t("2fM7")),v=t("p0pE"),E=t.n(v),q=t("2Taf"),k=t.n(q),I=t("vZ4D"),b=t.n(I),T=t("l4Ni"),w=t.n(T),_=t("ujKo"),x=t.n(_),C=t("MhPg"),D=t.n(C),S=(t("y8nQ"),t("Vl3Y")),F=t("q1tI"),P=t.n(F),M=t("MuoO"),N=t("usdK"),U=t("+n12"),j=t("T+dw"),O=t("02GU"),z=t.n(O),R=P.a.Fragment,V={labelCol:{span:5},wrapperCol:{span:19}},K=(n=Object(M["connect"])(function(e){var a=e.form,t=e.loading;return{submitting:t.effects["form/submitStepForm"],data:a.step,goodsDetail:a.goodsDetail,category_list:a.category_list,category_id:a.category_id}}),r=S["a"].create(),n(o=r((l=function(e){function a(e){var t;return k()(this,a),t=w()(this,x()(a).call(this,e)),t.setMainImage=function(e,a){var n=t.props,r=n.dispatch,o=n.goodsDetail,l=o.detailImgRecordUrl,i=l[0];l[0]=e,l[a]=i,r({type:"form/updateState",payload:{goodsDetail:E()({},o,{detailImgRecordUrl:l})}})},t.componentDidMount=function(){var e=t.props,a=e.dispatch,n=e.location,r=n.query,o=r.goods_id,l=r.task_id,i=r.action,s=r.qf;if(t.actionType=i,"edit"===i){var d="1"===s?1:0;l&&a({type:"form/queryTaskDetail",payload:{task_id:l}}),o&&a({type:"form/queryGoodsDetail",payload:{goods_id:o,auto_redirect:0,type:d}})}a({type:"form/queryCategoryList"}),console.log(window,"window -> ")},t.qf=e.location.query.qf,t}return D()(a,e),b()(a,[{key:"render",value:function(){var e=this,a=this.props,t=a.form,n=a.submitting,r=a.goodsDetail,o=a.category_list,l=a.category_id,f=a.location,v=a.dispatch,q=t.getFieldDecorator,k=t.validateFields,I=h["a"].Option,b=function(){var a="/fangdan/step-form/info";void 0!==e.qf&&(a="/fangdan/qf/info?qf=".concat(e.qf)),N["a"].push(a)},T=function(e){e.preventDefault(),k(function(e,a){if(!e){v({type:"form/updateState",payload:{goodsDetail:E()({},r,a),category_id:a.category_id}});var t="/fangdan/step-form/schedule";void 0!==f.query.qf&&(t="/fangdan/qf/schedule?qf=".concat(f.query.qf)),N["a"].push(t)}})},w=r.goods_id,_=(r.cate_name,r.title),x=r.detailImgRecordUrl,C=r.coupon_info,D=(r.commission,r.coupon_price),F=(r.comment_limit,r.comment_keyword,void 0!==f.query.qf),M={name:"file",action:"".concat(j["configs"][{API_ENV:"test"}.API_ENV].API_SERVER,"/cdk/v1/web/upload"),headers:{authorization:"authorization-text"},data:function(e){return{image:e,type:"avatar"}},onChange:function(e){if("uploading"!==e.file.status&&console.log(e.file,e.fileList),"done"===e.file.status){g["a"].success("".concat(e.file.name," file uploaded successfully"));var a=e.file.response.payload.url;v({type:"form/updateState",payload:{goodsDetail:E()({},r,{detailImgRecordUrl:[a]})}})}else"error"===e.file.status&&g["a"].error("".concat(e.file.name," file upload failed."))}};return P.a.createElement(S["a"],{layout:"horizontal",className:z.a.stepForm},"1"===f.query.qf?P.a.createElement(R,null,P.a.createElement(S["a"].Item,y()({},V,{className:z.a.stepFormText,label:"\u5e97\u94fa\u7f16\u53f7"}),w),P.a.createElement(S["a"].Item,y()({},V,{label:"\u5e97\u94fa\u540d\u79f0"}),q("title",{initialValue:_,rules:[{required:!0,message:"\u5e97\u94fa\u540d\u79f0"}]})(P.a.createElement(p["a"],{placeholder:"\u8bf7\u8f93\u5165\u5e97\u94fa\u540d\u79f0",style:{width:"80%"}}))),P.a.createElement(S["a"].Item,y()({},V,{label:"\u5e97\u94falogo"}),P.a.createElement(d["a"],{rowKey:"id",loading:!1,grid:{gutter:24,xl:3,xxl:3,lg:3,md:2,sm:1,xs:1},dataSource:x,renderItem:function(e,a){return P.a.createElement(d["a"].Item,null,P.a.createElement("img",{style:{width:"100%",height:"auto",marginBottom:16},alt:"",src:e}),P.a.createElement(c["a"],y()({className:z.a.uploadCustom},M),P.a.createElement(u["a"],null,P.a.createElement(m["a"],{type:"upload"})," \u66f4\u6362logo")))}}))):P.a.createElement(R,null,P.a.createElement(s["a"],{closable:!0,showIcon:!0,message:"\u6ce8\u610f\uff1a\u6d3b\u52a8\u671f\u95f4\u8bf7\u52ff\u968f\u610f\u4fee\u6539\u4f63\u91d1\u6bd4\u4f8b\u548c\u8d2d\u4e70\u4ef7\u683c\uff0c\u5426\u5219\u4efb\u52a1\u4f1a\u7acb\u5373\u7ec8\u6b62\uff0c\u5e76\u5f71\u54cd\u60a8\u7684\u4fe1\u7528\u5206",style:{marginBottom:24}}),P.a.createElement(S["a"].Item,y()({},V,{className:z.a.stepFormText,label:"\u5546\u54c1id"}),w),P.a.createElement(S["a"].Item,y()({},V,{className:z.a.stepFormText,label:"\u5546\u54c1\u5206\u7c7b"}),q("category_id",{initialValue:l,rules:[{required:!0,message:"\u8bf7\u9009\u62e9\u5546\u54c1\u5206\u7c7b"}]})(P.a.createElement(h["a"],{placeholder:"\u8bf7\u9009\u62e9\u5546\u54c1\u5206\u7c7b",style:{maxWidth:200,width:"100%"}},o.map(function(e,a){return P.a.createElement(I,{key:e.id,value:e.id},e.cate_name)})))),P.a.createElement(S["a"].Item,y()({},V,{label:"\u5546\u54c1\u6807\u9898"}),q("title",{initialValue:_,rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u5546\u54c1\u6807\u9898"}]})(P.a.createElement(p["a"],{placeholder:"\u8bf7\u8f93\u5165\u5546\u54c1\u6807\u9898",style:{width:"80%"}}))),P.a.createElement(S["a"].Item,y()({},V,{label:"\u5546\u54c1\u4e3b\u56fe"}),P.a.createElement(d["a"],{rowKey:"id",loading:!1,grid:{gutter:24,xl:3,xxl:3,lg:3,md:2,sm:1,xs:1},dataSource:x,renderItem:function(a,t){return P.a.createElement(d["a"].Item,null,P.a.createElement("img",{style:{width:"100%",height:"auto",marginBottom:16},alt:"",src:a}),P.a.createElement(u["a"],{onClick:function(){e.setMainImage(a,t)},style:{display:"block",margin:"0 auto"},size:"small"},0===t?"\u5f53\u524d\u4e3b\u56fe":"\u8bbe\u4e3a\u4e3b\u56fe"))}}))),F?"":P.a.createElement(P.a.Fragment,null,P.a.createElement(i["a"],{style:{margin:"24px 0"}}),C.coupon_discount?P.a.createElement(S["a"].Item,y()({},V,{className:z.a.stepFormText,label:"\u4f18\u60e0\u5238"}),C.coupon_discount,"\u5143"):"",P.a.createElement(S["a"].Item,y()({},V,{className:z.a.stepFormText,label:"\u5238\u540e\u4ef7"}),P.a.createElement("span",{className:z.a.money},D),P.a.createElement("span",{className:z.a.uppercase},"\uff08",Object(U["a"])(D),"\uff09")),P.a.createElement(S["a"].Item,y()({},V,{label:"\u5355\u7b14\u8fd4\u73b0\u91d1\u989d",required:!1}),q("commission",{initialValue:D,rules:[{required:!1,message:""}]})(P.a.createElement(p["a"],{disabled:!0,type:"number",autoComplete:"off",style:{width:"80%"}})))),P.a.createElement(S["a"].Item,{style:{marginBottom:8},wrapperCol:{xs:{span:24,offset:0},sm:{span:V.wrapperCol.span,offset:V.labelCol.span}},label:""},P.a.createElement(u["a"],{type:"primary",onClick:T,loading:n},"\u4e0b\u4e00\u6b65"),"edit"===this.actionType?"":P.a.createElement(u["a"],{onClick:b,style:{marginLeft:8}},"\u4e0a\u4e00\u6b65")))}}]),a}(P.a.PureComponent),o=l))||o)||o);a["default"]=K},Nr9G:function(e,a,t){"use strict";t.r(a);t("+L6B");var n,r,o,l=t("2/Rp"),i=(t("g9YV"),t("wCAj")),s=(t("14J3"),t("BMrR")),d=(t("jCWc"),t("kPKH")),c=(t("fOrg"),t("+KLJ")),u=t("p0pE"),m=t.n(u),p=(t("miYZ"),t("tsqr")),f=t("2Taf"),y=t.n(f),g=t("vZ4D"),h=t.n(g),v=t("l4Ni"),E=t.n(v),q=t("ujKo"),k=t.n(q),I=t("MhPg"),b=t.n(I),T=t("q1tI"),w=t.n(T),_=t("MuoO"),x=t("usdK"),C=t("mOP9"),D=!0,S=(n=Object(_["connect"])(function(e){var a=e.form;return{data:a.step,taskPayInfo:a.taskPayInfo,taskId:a.taskId}}),n((o=function(e){function a(){var e,t;y()(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=E()(this,(e=k()(a)).call.apply(e,[this].concat(r))),t.toPay=function(){if(D){D=!1;var e=t.props,a=e.dispatch,n=e.taskPayInfo;a({type:"form/pay",payload:{task_id:t.taskId,type:n.type}})}},t.goBack=function(){var e=t.props.location,a="/fangdan/step-form/schedule";void 0!==e.query.qf&&(a="/fangdan/qf/schedule?qf=".concat(e.query.qf)),x["a"].push(a)},t.componentDidMount=function(){var e=t.props,a=e.dispatch,n=e.taskId,r=e.location,o=r.query,l=o.task_id,i=(o.goods_id,o.need_fetch);t.taskId=n||l;var s=r.pathname+r.search;t.chargeUrl="/CapitalManage/Recharge?backTo=".concat(encodeURIComponent(s)),a({type:"form/queryPayInfoByTaskId",payload:{task_id:t.taskId}}).then(function(){var e=t.props.taskPayInfo,a=e.can_pay,n=e.pay_notice;0===a&&p["a"].error(n)}),i&&(t.actionType="pay")},t}return b()(a,e),h()(a,[{key:"componentWillUnmount",value:function(){D=!0}},{key:"render",value:function(){var e=this.props,a=e.taskPayInfo,t=e.location,n=[{title:"\u5206\u7c7b",dataIndex:"reward_type",key:"reward_type"},{title:"\u91d1\u989d",dataIndex:"rebate_money",key:"rebate_money"},{title:"\u6570\u91cf",dataIndex:"num",key:"num"},{title:"\u5408\u8ba1",key:"total_money",dataIndex:"total_money"}],r=[m()({id:1,reward_type:void 0===t.query.qf?"\u7528\u6237\u8fd4\u6b3e":"\u5e73\u53f0\u670d\u52a1\u8d39"},a)],o=this.chargeUrl||"";return w.a.createElement(T["Fragment"],null,1==a.can_pay?w.a.createElement(s["a"],null,w.a.createElement(d["a"],{push:6,span:12},w.a.createElement(c["a"],{closable:!0,showIcon:!0,message:"\u8bf7\u5148\u652f\u4ed8\u63a8\u5e7f\u8d39\u7528\uff0c\u63a8\u5e7f\u8d39\u7528\u5c06\u901a\u8fc7\u5e73\u53f0\u81ea\u52a8\u8fd4\u6b3e\u7ed9\u7528\u6237\u3002",style:{marginBottom:24,marginTop:20}}))):"",w.a.createElement(s["a"],null,w.a.createElement(d["a"],{style:{textAlign:"left",marginBottom:10},push:6,span:12},"\u63a8\u5e7f\u8d39\u7528\u660e\u7ec6\uff1a")),w.a.createElement(s["a"],null,w.a.createElement(d["a"],{push:6,span:12},w.a.createElement(i["a"],{rowKey:function(e){return e.id},bordered:!0,pagination:!1,columns:n,dataSource:r}))),w.a.createElement(s["a"],null,w.a.createElement(d["a"],{style:{textAlign:"right",marginTop:10},push:6,span:12},"\u8d39\u7528\u603b\u8ba1\uff1a\uffe5",a.total_money,"\u5143")),w.a.createElement(s["a"],{style:{margin:"40px 0"}},w.a.createElement(d["a"],{offset:6,span:3},"\u9700\u652f\u4ed8\uff1a\uffe5",a.wait_pay),w.a.createElement(d["a"],{push:4,span:6},"\u4f59\u989d\uff1a\uffe5",a.balance," ",a.can_pay?"":w.a.createElement(C["a"],{to:o,style:{marginLeft:10}},"\u4f59\u989d\u4e0d\u8db3,\u53bb\u5145\u503c>"))),w.a.createElement(s["a"],null,w.a.createElement(d["a"],{offset:10},1==a.can_pay?w.a.createElement(l["a"],{onClick:this.toPay,size:"default",type:"primary"},"\u786e\u8ba4\u652f\u4ed8"):w.a.createElement(l["a"],{disabled:!0,type:"primary"},"\u786e\u8ba4\u652f\u4ed8"),"pay"===this.actionType?"":w.a.createElement(l["a"],{onClick:this.goBack,style:{marginLeft:20},size:"default"},"\u4e0a\u4e00\u6b65"))))}}]),a}(w.a.PureComponent),r=o))||r);a["default"]=S},SLHm:function(e,a,t){"use strict";t.r(a);t("+L6B");var n,r,o,l=t("2/Rp"),i=(t("R9oj"),t("ECub")),s=(t("g9YV"),t("wCAj")),d=(t("14J3"),t("BMrR")),c=(t("iQDF"),t("+eQT")),u=(t("jCWc"),t("kPKH")),m=(t("fOrg"),t("+KLJ")),p=(t("miYZ"),t("tsqr")),f=(t("5NDa"),t("5rEg")),y=t("p0pE"),g=t.n(y),h=t("2Taf"),v=t.n(h),E=t("vZ4D"),q=t.n(E),k=t("l4Ni"),I=t.n(k),b=t("ujKo"),T=t.n(b),w=t("MhPg"),_=t.n(w),x=t("Y/ft"),C=t.n(x),D=(t("y8nQ"),t("Vl3Y")),S=(t("OaEy"),t("2fM7")),F=t("q1tI"),P=t.n(F),M=t("MuoO"),N=t("usdK"),U=t("wd/R"),j=t.n(U),O="YYYY-MM-DD",z=S["a"].Option,R=D["a"].Item,V=P.a.createContext(),K=function(e){var a=e.form,t=(e.index,C()(e,["form","index"]));return P.a.createElement(V.Provider,{value:a},P.a.createElement("tr",t))},L=function(){for(var e=[],a=0;a<24;a++)e.push(a);return e}(),B=D["a"].create()(K),Z=function(e){function a(){var e,t;v()(this,a);for(var n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return t=I()(this,(e=T()(a)).call.apply(e,[this].concat(r))),t.state={editing:!0},t.toggleEdit=function(){var e=!t.state.editing;t.setState({editing:e},function(){e&&t.input.focus()})},t.save=function(e){var a=e.target,n=t.props,r=n.record,o=n.handleSave;t.form.validateFields(function(n,l){n&&n[e.currentTarget.id]||(t.toggleEdit(),o(g()({},r,l,{amount:a.value})))})},t.saveTime=function(e){var a=t.props,n=a.record,r=a.handleSave;t.form.validateFields(function(a,t){a||r(g()({},n,t,{hour:e}))})},t}return _()(a,e),q()(a,[{key:"render",value:function(){var e=this,a=this.state.editing,t=this.props,n=t.editable,r=t.dataIndex,o=(t.title,t.record),l=(t.index,t.handleSave,t.editTime),i=C()(t,["editable","dataIndex","title","record","index","handleSave","editTime"]);return P.a.createElement("td",i,n||l?P.a.createElement(V.Consumer,null,function(t){return e.form=t,l?P.a.createElement(R,{style:{margin:0}},t.getFieldDecorator(r,{rules:[{required:!0,message:"\u8bf7\u9009\u62e9"}],initialValue:o[r]||L[0]})(P.a.createElement(S["a"],{placeholder:"\u8bf7\u9009\u62e9",style:{width:150},onChange:e.saveTime,ref:function(a){return e.select=a}},L.length&&L.map(function(e,a){return P.a.createElement(z,{value:a,key:a},e,"\u70b9")})))):a?P.a.createElement(R,{style:{margin:0}},t.getFieldDecorator(r,{rules:[{required:!0,message:"\u8bf7\u8f93\u5165\u63a8\u5e7f\u6570\u91cf"},{pattern:/^[0-9]*$/,message:"\u8bf7\u8f93\u5165\u6570\u5b57"}],initialValue:o[r]||""})(P.a.createElement(f["a"],{ref:function(a){return e.input=a},onPressEnter:e.save,onBlur:e.save,placeholder:"\u8bf7\u8f93\u5165\u6570\u91cf"}))):P.a.createElement("div",{className:"editable-cell-value-wrap",style:{paddingRight:24},onClick:e.toggleEdit},i.children)}):i.children)}}]),a}(P.a.Component),H=(n=Object(M["connect"])(function(e){var a=e.form,t=e.loading;return{taskId:a.taskId,schedules:a.schedules,startTime:a.startTime,endTime:a.endTime,goodsDetail:a.goodsDetail,pddZSId:a.pddZSId,submitting:t.effects["form/publishTask"]}}),n((o=function(e){function a(e){var t;return v()(this,a),t=I()(this,T()(a).call(this,e)),t.state={},t.rangePicker=function(e,a){var n=e&&e[1],r=a[0],o=a[1],l=j()(r);t.props.schedules;if(n>l.add(7,"days"))p["a"].warning("\u6700\u591a\u9009\u62e97\u5929\u8fdb\u884c\u6392\u671f");else{t.startTimeTemp=r,t.endTimeTemp=o;var i=j()(r),s=j()(o),d=t.state.index,c=[];while(i<=s)c.push({key:d,day:i.format(O),amount:"\u8bf7\u8f93\u5165\u6570\u91cf",hour:0}),i.add(1,"days"),t.setState({index:d++});t.setState({schedules:c}),t.startTimeTemp?t.makeScheduleData(t.startTimeTemp,t.endTimeTemp):p["a"].warning("\u8bf7\u5148\u9009\u62e9\u5408\u9002\u7684\u63a8\u5e7f\u65e5\u671f")}},t.makeScheduleData=function(e,a){var n=t.props,r=n.dispatch,o=n.schedules;t.schedulesHash=t.schedulesHash||{};var l={};e&&(t.startTimeTemp=e,t.endTimeTemp=a);for(var i=0;i<o.length;i+=1){var s=o[i];t.schedulesHash[s.day]=s.amount,l[s.day]=s.hour}var d=1,c=[],u=j()(e),m=j()(a),p={};while(m>=u){var f=u.format(O);t.schedulesHash[f]||(t.schedulesHash[f]="");var y=t.schedulesHash[f],g=l[f];p[f]=y,c.push({key:d,day:f,amount:y,hour:g}),u.add(1,"days"),t.setState({index:d++})}t.schedulesHash=p,r({type:"form/setScheduleTime",payload:{startTime:e,endTime:a,schedules:c}})},t.onValidateForm=function(){for(var e=!0,a=!1,n=Object.keys(t.schedulesHash),r=0;r<n.length;r+=1){var o=n[r],l=t.schedulesHash[o];if(!l){e=!1;break}l<1&&(a=!0)}if(!t.startTimeTemp||n.length<1)p["a"].error("\u8bf7\u5148\u9009\u62e9\u63a8\u5e7f\u65e5\u671f\u8fdb\u884c\u6392\u671f");else if(a)p["a"].error("\u4f60\u586b\u5199\u7684\u6295\u653e\u6570\u91cf\u5fc5\u987b > 0");else if(e){var i=t.props,s=i.dispatch,d=i.goodsDetail,c=i.startTime,u=i.endTime,m=i.schedules,f=i.taskId,y=i.pddZSId,g=i.location,h=10,v="";void 0!==g.query.qf&&(h="1"==g.query.qf?31:30,v=g.query.qf),s({type:"form/publishTask",payload:{title:d.title,goods_id:d.goods_id,category_id:d.category_id,images:d.detailImgRecordUrl,start_time:c,end_time:u,plan_info:m,task_id:f,zs_duo_id:y,comment_limit:d.comment_limit,comment_keyword:d.comment_keyword,type:h,qf:v}})}else p["a"].error("\u4f60\u8fd8\u6709\u6295\u653e\u6570\u91cf\u6ca1\u6709\u586b\u5199\u5b8c\u6210\u54e6\uff5e")},t.componentWillMount=function(){console.log("componentWillMount -> ",t.props);var e=t.props,a=e.startTime,n=e.endTime;t.makeScheduleData(a,n)},t.handleSave=function(e){var a=t.props,n=a.schedules,r=a.dispatch,o=a.startTime,l=a.endTime,i=e.amount,s=e.hour,d=e.day,c=n.find(function(e){return e.day===d});/[^\d]/gi.test(i)||(c.amount=i,c.hour=s,t.schedulesHash[d]=i,r({type:"form/setScheduleTime",payload:{startTime:o,endTime:l,schedules:n}}))},t.columns=[{title:"\u63a8\u5e7f\u6392\u671f",dataIndex:"day",width:"20%"},{title:"\u6295\u653e\u5f00\u59cb\u65f6\u95f4\uff08\u5f53\u65e524\u70b9\u7ed3\u675f\uff09",dataIndex:"hour",width:"40%",editTime:!0},{title:"\u6295\u653e\u6570\u91cf",dataIndex:"amount",editable:!0,width:"40%"}],t}return _()(a,e),q()(a,[{key:"render",value:function(){var e=this,a=this.props,t=a.schedules,n=a.location,r=this.props,o=r.submitting,p=r.startTime,f=r.endTime,y=p&&j()(p),h=f&&j()(f),v={body:{row:B,cell:Z}},E=this.columns.map(function(a){return a.editable||a.editTime?g()({},a,{onCell:function(t){return{record:t,editable:a.editable,editTime:a.editTime,dataIndex:a.dataIndex,title:a.title,handleSave:e.handleSave}}}):a}),q=function(e){var a=j()().add(-1,"days");return e<a},k=void 0!==n.query.qf?P.a.createElement("div",{style:{whiteSpace:"pre-wrap"}},"\u5efa\u8bae\u6295\u653e\u4e0d\u4f4e\u4e8e3-7\u5929\uff0c\u6839\u636e\u7edf\u8ba198%\u6210\u529f\u6848\u4f8b\u8fde\u7eed\u6295\u653e3-10\u5929\u53ef\u63d0\u5347\u8f6c\u5316\u7387"):P.a.createElement("div",{style:{whiteSpace:"pre-wrap"}},"1\u3001\u60f3\u6743\u91cd\u5927\uff0c\u5355\u91cf\u4e00\u5b9a\u8981\u8bbe\u8ba1\u4e3a\u7a33\u5b9a\u589e\u957f\u8d8b\u52bf\uff08\u9012\u589e\uff09\u3002",P.a.createElement("br",null),"2\u3001\u5efa\u8bae\u6295\u653e\u5468\u671f\u4e3a3~7\u5929 ",P.a.createElement("br",null),"\u6ce8\u610f\uff1a\u8bf7\u8bb0\u4f4f\u4e0a\u9762\u7684\u4e24\u4e2a\u91cd\u70b9\uff0c\u8ba9\u81ea\u5df1\u7684\u5e97\u94fa\u5feb\u901f\u63d0\u5347\u8f6c\u5316\u7387\u548c\u4eba\u6c14\u9500\u91cf\u3002"),I=function(){var e="/fangdan/step-form/confirm";void 0!==n.query.qf&&(e="/fangdan/qf/confirm?qf=".concat(n.query.qf)),N["a"].push(e)};this.planSum=0;var b=function(){for(var a=Object.keys(e.schedulesHash),t=0;t<a.length;t+=1){var n=a[t],r=e.schedulesHash[n]||0;e.planSum+=parseInt(r,10)}return e.planSum};return P.a.createElement(F["Fragment"],null,P.a.createElement(m["a"],{style:{marginTop:"30px"},message:"\u6e29\u99a8\u63d0\u793a",description:k,type:"info",showIcon:!0}),P.a.createElement(d["a"],{gutter:0,style:{marginTop:"30px"}},P.a.createElement(u["a"],{span:2},"\u63a8\u5e7f\u65e5\u671f\uff1a"),P.a.createElement(u["a"],{span:6},P.a.createElement(c["a"].RangePicker,{defaultValue:y?[y,h]:[],disabledDate:q,onChange:this.rangePicker}))),y?P.a.createElement(s["a"],{style:{width:"60%",marginTop:20},components:v,bordered:!0,dataSource:t,columns:E,pagination:!1}):P.a.createElement(i["a"],{style:{margin:"20px auto 120px"},description:"\u8bf7\u9009\u62e9\u63a8\u5e7f\u65e5\u671f\u540e\u8fdb\u884c\u4e00\u952e\u6392\u671f"}),P.a.createElement(d["a"],{style:{marginTop:20}},P.a.createElement(u["a"],{span:6,style:{marginBottom:10}},"\u603b\u6295\u653e\u6570\u91cf\uff1a",P.a.createElement("span",{style:{color:"#1890FF",fontWeight:500,fontSize:18}},b()))),P.a.createElement(d["a"],{style:{margin:"20px auto 50px"}},P.a.createElement(u["a"],{push:11},P.a.createElement(l["a"],{type:"primary",size:"default",onClick:this.onValidateForm,loading:o},"\u4e0b\u4e00\u6b65"),P.a.createElement(l["a"],{onClick:I,size:"default",style:{marginLeft:8}},"\u4e0a\u4e00\u6b65"))))}}]),a}(P.a.PureComponent),r=o))||r);a["default"]=H},w6JL:function(e,a,t){"use strict";t.r(a),t.d(a,"default",function(){return k});t("IzEo");var n=t("bx4M"),r=t("2Taf"),o=t.n(r),l=t("vZ4D"),i=t.n(l),s=t("l4Ni"),d=t.n(s),c=t("ujKo"),u=t.n(c),m=t("MhPg"),p=t.n(m),f=(t("FJo9"),t("L41K")),y=t("q1tI"),g=t.n(y),h=t("zHco"),v=t("wcew"),E=t.n(v),q=f["a"].Step,k=function(e){function a(){return o()(this,a),d()(this,u()(a).apply(this,arguments))}return p()(a,e),i()(a,[{key:"componentDidMount",value:function(){window.onbeforeunload=function(){return"\u786e\u5b9a\u79bb\u5f00\u5417\uff1f\u7cfb\u7edf\u53ef\u80fd\u4e0d\u4f1a\u4fdd\u5b58\u60a8\u6240\u505a\u7684\u66f4\u6539"}}},{key:"componentWillUnmount",value:function(){window.onbeforeunload=null}},{key:"getCurrentStep",value:function(){var e=this.props.location,a=e.pathname,t=a.split("/");switch(t[t.length-1]){case"info":return 0;case"confirm":return 1;case"schedule":return 2;case"pay":return 3;case"result":return 4;default:return 0}}},{key:"render",value:function(){var e=this.props,a=e.location,t=e.children;console.log(a,"1");var r="\u65b0\u589e\u514d\u5355\u8bd5\u7528\u63a8\u5e7f\u5546\u54c1";return(a.pathname.indexOf("/qf/")>-1||void 0!==a.query.qf)&&(r="\u5546\u54c1\u5708\u7c89","1"===a.query.qf&&(r="\u5e97\u94fa\u5708\u7c89")),g.a.createElement(h["a"],{title:r,tabActiveKey:a.pathname,content:"\u5feb\u901f\u63d0\u5347\u8f6c\u5316\u7387/\u5feb\u901f\u805a\u96c6\u4eba\u6c14/\u5b9d\u8d1d\u6d41\u91cf"},g.a.createElement(n["a"],{bordered:!1},g.a.createElement(y["Fragment"],null,g.a.createElement(f["a"],{current:this.getCurrentStep(),className:E.a.steps},g.a.createElement(q,{title:"\u6821\u9a8c\u5546\u54c1"}),g.a.createElement(q,{title:"\u7f16\u8f91\u63a8\u5e7f"}),g.a.createElement(q,{title:"\u63a8\u5e7f\u6392\u671f"}),g.a.createElement(q,{title:"\u652f\u4ed8"}),g.a.createElement(q,{title:"\u5b8c\u6210"})),t)))}}]),a}(y["PureComponent"])},wcew:function(e,a,t){e.exports={card:"antd-pro-pages-v1-fang-dan-style-card",heading:"antd-pro-pages-v1-fang-dan-style-heading",steps:"antd-pro-pages-v1-fang-dan-style-steps",errorIcon:"antd-pro-pages-v1-fang-dan-style-errorIcon",errorPopover:"antd-pro-pages-v1-fang-dan-style-errorPopover",errorListItem:"antd-pro-pages-v1-fang-dan-style-errorListItem",errorField:"antd-pro-pages-v1-fang-dan-style-errorField",editable:"antd-pro-pages-v1-fang-dan-style-editable",advancedForm:"antd-pro-pages-v1-fang-dan-style-advancedForm",optional:"antd-pro-pages-v1-fang-dan-style-optional"}},zqdM:function(e,a,t){"use strict";t.r(a);t("+L6B");var n,r,o=t("2/Rp"),l=t("2Taf"),i=t.n(l),s=t("vZ4D"),d=t.n(s),c=t("l4Ni"),u=t.n(c),m=t("ujKo"),p=t.n(m),f=t("MhPg"),y=t.n(f),g=t("q1tI"),h=t.n(g),v=t("MuoO"),E=t("usdK"),q=t("ALo4"),k=t("02GU"),I=t.n(k),b=(n=Object(v["connect"])(function(e){var a=e.form,t=e.user;return{data:a.step,taskId:a.taskId,currentUser:t.currentUser}}),n(r=function(e){function a(){return i()(this,a),u()(this,p()(a).apply(this,arguments))}return y()(a,e),d()(a,[{key:"render",value:function(){var e=this.props,a=(e.taskId,e.currentUser),t=e.location,n="/fangdan/list/GeneralizeDetail?task_id=".concat(t.query.task_id),r="/fangdan/list";/^3[0|1]$/.test(t.query.type)&&(n="/fangdan/qfDetail?task_id=".concat(t.query.task_id),r+="?qf=".concat(t.query.type));var l=function(){E["a"].push(n)},i=function(){E["a"].push(r)},s=h.a.createElement(g["Fragment"],null,h.a.createElement(o["a"],{size:"large",type:"primary",onClick:l},"\u67e5\u770b\u8be6\u60c5"),h.a.createElement(o["a"],{onClick:i,style:{margin:"40px 0"},size:"large"},"\u8fd4\u56de\u5217\u8868")),d=a.phone?"".concat(a.phone.substr(0,3),"****").concat(a.phone.substr(7)):"",c=h.a.createElement("div",{style:{whiteSpace:"pre-wrap"}},"\u6211\u4eec\u5c06\u572824\u5c0f\u65f6\u5185\u5ba1\u6838\u5b8c\u6bd5",h.a.createElement("br",null),"\u5ba1\u6838\u7ed3\u679c\u4ee5\u77ed\u4fe1\u5f62\u5f0f\u53d1\u9001\u5230",d,"\u7684\u624b\u673a\u4e0a");return h.a.createElement(q["a"],{type:"success",title:"\u63d0\u4ea4\u6210\u529f",description:c,extra:"",actions:s,className:I.a.result})}}]),a}(h.a.PureComponent))||r);a["default"]=b}}]);